"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{4989:function(e,t,s){s.d(t,{F5:function(){return S},iu:function(){return C}});var n=s(7437),a=s(2265),r=s(521),i=s(8614),c=s(2926),o=s(5395),l=s(5805),d=s(7806),u=s(8662),m=s(730),g=s(9374),x=s(8178),h=s(401),f=s(8867),v=s(2489),b=s(9345),p=s(4743),w=s(3448),y=s(2371),j=s(5749),N=s(257);function S(e){let{streamId:t,className:s}=e,{guests:S,addGuest:E,removeGuest:C,updateGuestStatus:k}=(0,y.D)(),[T,O]=(0,a.useState)(!1),[P,A]=(0,a.useState)(""),[D,I]=(0,a.useState)(""),[L,z]=(0,a.useState)(!1),[R,Z]=(0,a.useState)(null),{sendAnswer:M,sendIceCandidate:_}=(0,j.s)(t),U=async()=>{if(D.trim()){z(!0);try{let e=await fetch("".concat(N.env.NEXT_PUBLIC_API_URL||"http://localhost:3001","/api/guests"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streamId:t,name:D,email:P})}),s=await e.json();s.guest&&(E({...s.guest,status:"invited",videoEnabled:!0,audioEnabled:!0}),I(""),A(""),O(!1))}catch(e){console.error("Failed to invite guest:",e)}finally{z(!1)}}},J=async e=>{try{await fetch("".concat(N.env.NEXT_PUBLIC_API_URL,"/api/guests/").concat(e),{method:"DELETE"}),C(e)}catch(e){console.error("Failed to remove guest:",e)}},F=(e,t)=>{let s="".concat(window.location.origin,"/guest/join/").concat(t);navigator.clipboard.writeText(s),Z(e),setTimeout(()=>Z(null),2e3)},G=e=>{switch(e){case"connected":return"bg-green-500";case"waiting":return"bg-yellow-500";case"invited":return"bg-blue-500";default:return"bg-gray-500"}},B=e=>{switch(e){case"excellent":case"good":return(0,n.jsx)(c.Z,{size:14,className:"text-green-400"});case"fair":return(0,n.jsx)(c.Z,{size:14,className:"text-yellow-400"});default:return(0,n.jsx)(o.Z,{size:14,className:"text-red-400"})}};return(0,n.jsxs)("div",{className:(0,w.cn)("glass rounded-2xl p-4",s),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,n.jsx)(l.Z,{size:18,className:"text-accent-gold"}),"Guests",S.length>0&&(0,n.jsx)("span",{className:"text-xs bg-accent-burgundy/20 text-accent-gold px-2 py-0.5 rounded-full",children:S.length})]}),(0,n.jsx)("button",{onClick:()=>O(!0),className:"p-2 rounded-lg bg-accent-gold/20 hover:bg-accent-gold/30 text-accent-gold transition-colors",title:"Invite Guest",children:(0,n.jsx)(d.Z,{size:16})})]}),(0,n.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:0===S.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)(l.Z,{size:32,className:"mx-auto mb-2 opacity-50"}),(0,n.jsx)("p",{className:"text-sm",children:"No guests yet"}),(0,n.jsx)("p",{className:"text-xs",children:"Invite guests to join your stream"})]}):S.map(e=>(0,n.jsxs)(r.E.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-accent-burgundy to-accent-gold flex items-center justify-center font-bold text-white",children:e.name.charAt(0).toUpperCase()}),(0,n.jsx)("div",{className:(0,w.cn)("absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-2 border-surface-300",G(e.status))})]}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-medium truncate",children:e.name}),"connected"===e.status&&B(e.connectionQuality)]}),(0,n.jsx)("span",{className:"text-xs text-gray-400 capitalize",children:e.status})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:["connected"===e.status&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:(0,w.cn)("p-1.5 rounded-lg transition-colors",e.audioEnabled?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),title:e.audioEnabled?"Mute":"Unmute",children:e.audioEnabled?(0,n.jsx)(u.Z,{size:14}):(0,n.jsx)(m.Z,{size:14})}),(0,n.jsx)("button",{className:(0,w.cn)("p-1.5 rounded-lg transition-colors",e.videoEnabled?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),title:e.videoEnabled?"Hide Video":"Show Video",children:e.videoEnabled?(0,n.jsx)(g.Z,{size:14}):(0,n.jsx)(x.Z,{size:14})})]}),"invited"===e.status&&(0,n.jsx)("button",{onClick:()=>F(e.id,e.id),className:"p-1.5 rounded-lg bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 transition-colors",title:"Copy Invite Link",children:R===e.id?(0,n.jsx)(h.Z,{size:14}):(0,n.jsx)(f.Z,{size:14})}),(0,n.jsx)("button",{onClick:()=>J(e.id),className:"p-1.5 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors",title:"Remove Guest",children:(0,n.jsx)(v.Z,{size:14})})]})]},e.id))}),(0,n.jsx)(i.M,{children:T&&(0,n.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>O(!1),children:(0,n.jsxs)(r.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"glass rounded-2xl p-6 w-full max-w-md m-4",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,n.jsx)(d.Z,{size:24,className:"text-accent-gold"}),"Invite Guest"]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Name *"}),(0,n.jsx)("input",{type:"text",value:D,onChange:e=>I(e.target.value),placeholder:"Guest name",className:"input-field"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Email (optional)"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(b.Z,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,n.jsx)("input",{type:"email",value:P,onChange:e=>A(e.target.value),placeholder:"guest@example.com",className:"input-field pl-10"})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,n.jsx)("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 transition-colors",children:"Cancel"}),(0,n.jsx)("button",{onClick:U,disabled:!D.trim()||L,className:(0,w.cn)("flex-1 px-4 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2",D.trim()&&!L?"bg-accent-burgundy text-white hover:bg-accent-burgundy/80":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:L?(0,n.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{size:16}),"Send Invite"]})})]})]})})})]})}function E(e){let{guest:t,streamId:s}=e,r=(0,a.useRef)(null),i=(0,a.useRef)(null),{sendAnswer:c,sendIceCandidate:o}=(0,j.s)(s);return(0,a.useEffect)(()=>{let e=async e=>{let{offer:s,socketId:n}=e.detail;try{i.current=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),i.current.onicecandidate=e=>{e.candidate&&o(e.candidate,void 0,n,t.id)},i.current.ontrack=e=>{r.current&&(r.current.srcObject=e.streams[0])},await i.current.setRemoteDescription(new RTCSessionDescription(s));let e=await i.current.createAnswer();await i.current.setLocalDescription(e),c(n,e,t.id)}catch(e){console.error("Failed to handle guest offer:",e)}},s=async e=>{let{candidate:t}=e.detail;i.current&&await i.current.addIceCandidate(new RTCIceCandidate(t))},n="signaling:offer:".concat(t.id),a="signaling:ice:".concat(t.id);return window.addEventListener(n,e),window.addEventListener(a,s),()=>{window.removeEventListener(n,e),window.removeEventListener(a,s),i.current&&i.current.close()}},[t.id,s,c,o]),(0,n.jsxs)("div",{className:"relative aspect-video bg-surface-400 rounded-xl overflow-hidden shadow-lg border border-white/5",children:[(0,n.jsx)("video",{ref:r,autoPlay:!0,playsInline:!0,className:(0,w.cn)("w-full h-full object-cover transition-opacity duration-500","connected"===t.status?"opacity-100":"opacity-0")}),"connected"!==t.status&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-accent-burgundy/20 to-accent-gold/20 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-accent-burgundy to-accent-gold flex items-center justify-center font-bold text-2xl text-white mx-auto mb-2 shadow-neon-burgundy",children:t.name.charAt(0).toUpperCase()}),(0,n.jsx)("p",{className:"text-xs text-gray-400 animate-pulse",children:"Waiting for connection..."})]})}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/90 to-transparent",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:(0,w.cn)("w-2 h-2 rounded-full","connected"===t.status?"bg-green-500 animate-pulse":"bg-gray-500")}),(0,n.jsx)("span",{className:"text-sm font-semibold truncate text-white",children:t.name})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[!t.audioEnabled&&(0,n.jsx)("div",{className:"p-1 rounded bg-red-500/20",children:(0,n.jsx)(m.Z,{size:12,className:"text-red-400"})}),!t.videoEnabled&&(0,n.jsx)("div",{className:"p-1 rounded bg-red-500/20",children:(0,n.jsx)(x.Z,{size:12,className:"text-red-400"})})]})]})})]})}function C(e){let{className:t,streamId:s}=e,{guests:r}=(0,y.D)(),i=r.filter(e=>"connected"===e.status||"waiting"===e.status);if((0,a.useEffect)(()=>{let e=async e=>{let{offer:t,guestId:s,socketId:n}=e.detail,a=new CustomEvent("signaling:offer:".concat(s),{detail:{offer:t,socketId:n}});window.dispatchEvent(a)},t=e=>{let{candidate:t,guestId:s}=e.detail,n=new CustomEvent("signaling:ice:".concat(s),{detail:{candidate:t}});window.dispatchEvent(n)};return window.addEventListener("guest-offer",e),window.addEventListener("guest-ice",t),()=>{window.removeEventListener("guest-offer",e),window.removeEventListener("guest-ice",t)}},[]),0===i.length)return null;let c=1===i.length?1:i.length<=4?2:3;return(0,n.jsx)("div",{className:(0,w.cn)("grid gap-3 transition-all duration-500",1===c?"grid-cols-1":2===c?"grid-cols-2":"grid-cols-3",t),children:i.map(e=>(0,n.jsx)(E,{guest:e,streamId:s},e.id))})}},1171:function(e,t,s){s.d(t,{F:function(){return d}});var n=s(7437),a=s(2265),r=s(1837),i=s(2371),c=s(5863),o=s(2252),l=s(3448);function d(e){let{avatarId:t,streamId:s,className:d,onSessionCreated:u}=e,m=(0,i.D)(e=>e.setAvatarSessionId),g=(0,a.useRef)(null),x=(0,a.useRef)(null),[h,f]=(0,a.useState)("idle"),[v,b]=(0,a.useState)(null);(0,a.useEffect)(()=>(t&&s&&p(),()=>{w()}),[t,s]);let p=async()=>{try{f("linking"),b(null);let e=await r.b1.createSession(t,s);if(!e.data||!e.data.session)throw Error(e.error||"Failed to create avatar session");let{session_id:n,sdp:a,ice_servers:i}=e.data.session;m(n),u&&u(n),x.current=new RTCPeerConnection({iceServers:i.map(e=>({urls:e.urls}))}),x.current.ontrack=e=>{g.current&&e.streams[0]&&(g.current.srcObject=e.streams[0],f("streaming"))},await x.current.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:a}));let c=await x.current.createAnswer();await x.current.setLocalDescription(c);let o=await r.b1.startSession(n,c.sdp);if(o.error)throw Error(o.error)}catch(e){console.error("WebRTC Error:",e),b(e instanceof Error?e.message:"Streaming failed"),f("error")}},w=()=>{m(null),x.current&&(x.current.close(),x.current=null),g.current&&(g.current.srcObject=null)};return(0,n.jsxs)("div",{className:(0,l.cn)("relative bg-surface-400 rounded-xl overflow-hidden aspect-video",d),children:[(0,n.jsx)("video",{ref:g,autoPlay:!0,playsInline:!0,className:(0,l.cn)("w-full h-full object-cover transition-opacity duration-1000","streaming"===h?"opacity-100":"opacity-0")}),"linking"===h&&(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-surface-400/80 backdrop-blur-sm",children:[(0,n.jsx)(c.Z,{size:32,className:"text-accent-gold animate-spin mb-3"}),(0,n.jsx)("p",{className:"text-sm font-medium text-white/80",children:"Connecting to AI Avatar..."})]}),"error"===h&&(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-500/10 backdrop-blur-sm p-6 text-center",children:[(0,n.jsx)(o.Z,{size:32,className:"text-red-400 mb-3"}),(0,n.jsx)("p",{className:"text-sm font-medium text-red-300 mb-1",children:"Connection Failed"}),(0,n.jsx)("p",{className:"text-xs text-red-200/60 max-w-[200px]",children:v}),(0,n.jsx)("button",{onClick:p,className:"mt-4 px-4 py-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-xs text-red-300 transition-colors",children:"Try Again"})]}),"idle"===h&&!t&&(0,n.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,n.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Select an avatar to start session"})})]})}},1837:function(e,t,s){s.d(t,{Ar:function(){return o},Iu:function(){return r},b1:function(){return i},iJ:function(){return l},no:function(){return c}});let n=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s=await fetch("".concat(n).concat(e),{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!s.ok)return{error:(await s.json()).error||"Request failed"};return{data:await s.json()}}catch(e){return{error:e instanceof Error?e.message:"Unknown error"}}}let r={create:e=>a("/streams",{method:"POST",body:JSON.stringify(e)}),get:e=>a("/streams/".concat(e)),getByUser:e=>a("/streams/user/".concat(e)),start:e=>a("/streams/".concat(e,"/start"),{method:"POST"}),stop:e=>a("/streams/".concat(e,"/stop"),{method:"POST"})},i={list:()=>a("/avatars"),listVoices:()=>a("/voices"),createSession:(e,t)=>a("/avatar/session",{method:"POST",body:JSON.stringify({avatarId:e,streamId:t})}),startSession:(e,t)=>a("/avatar/session/start",{method:"POST",body:JSON.stringify({sessionId:e,sdpAnswer:t})}),speak:e=>a("/avatar/speak",{method:"POST",body:JSON.stringify(e)}),stop:(e,t)=>a("/avatar/stop",{method:"POST",body:JSON.stringify({sessionId:e,streamId:t})})},c={moderate:e=>a("/ai/moderate",{method:"POST",body:JSON.stringify({text:e})}),generateScript:(e,t,s)=>a("/ai/generate-script",{method:"POST",body:JSON.stringify({topic:e,style:t,duration:s})}),suggestScene:(e,t,s)=>a("/ai/suggest-scene",{method:"POST",body:JSON.stringify({currentScene:e,chatHistory:t,availableScenes:s})}),getChatResponse:(e,t,s)=>a("/ai/chat-response",{method:"POST",body:JSON.stringify({question:e,streamTopic:t,previousResponses:s})}),generateMetadata:(e,t)=>a("/ai/generate-metadata",{method:"POST",body:JSON.stringify({title:e,topic:t})})},o={list:e=>a("/scenes/".concat(e)),create:e=>a("/scenes",{method:"POST",body:JSON.stringify(e)}),activate:(e,t)=>a("/scenes/".concat(e,"/activate/").concat(t),{method:"POST"})},l={register:e=>a("/auth/register",{method:"POST",body:JSON.stringify(e)})}},5749:function(e,t,s){s.d(t,{s:function(){return c}});var n=s(2265),a=s(8680),r=s(2371);let i=s(257).env.NEXT_PUBLIC_SOCKET_URL||"http://localhost:3001";function c(e){let t=(0,n.useRef)(null),{addChatMessage:s,addGuest:c,removeGuest:o,updateGuestStatus:l,setAnalytics:d}=(0,r.D)();(0,n.useEffect)(()=>{t.current=(0,a.io)(i,{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});let n=t.current;return n.on("connect",()=>{console.log("Connected to WebSocket server"),e&&n.emit("stream:join",e)}),n.on("disconnect",()=>{console.log("Disconnected from WebSocket server")}),n.on("chat:message",e=>{s({id:e.id||"msg-".concat(Date.now()),platform:e.platform,username:e.username,message:e.message,timestamp:new Date(e.timestamp),highlighted:e.highlighted||!1,donation:e.donation})}),n.on("guest:joined",e=>{c({id:e.id||e.guestId,name:e.name,status:"connected",videoEnabled:!0,audioEnabled:!0,connectionQuality:"excellent"})}),n.on("guest:left",e=>{o(e.id||e.guestId)}),n.on("stream:viewers",e=>{let t=r.D.getState();t.stream&&t.setStream({...t.stream,viewerCount:e.count})}),n.on("scene:switched",e=>{let t=r.D.getState(),s=t.scenes.find(t=>t.id===e.sceneId);s&&t.setActiveScene(s)}),n.on("guest:signal:offer",e=>{let t=new CustomEvent("guest-offer",{detail:e});window.dispatchEvent(t)}),n.on("guest:signal:answer",e=>{let t=new CustomEvent("guest-answer",{detail:e});window.dispatchEvent(t)}),n.on("guest:signal:ice",e=>{let t=new CustomEvent("guest-ice",{detail:e});window.dispatchEvent(t)}),()=>{n.disconnect()}},[e,s,c,o]);let u=(0,n.useCallback)(s=>{t.current&&e&&t.current.emit("stream:start",{streamId:e,platforms:s})},[e]),m=(0,n.useCallback)(()=>{t.current&&e&&t.current.emit("stream:stop",e)},[e]),g=(0,n.useCallback)(s=>{t.current&&e&&t.current.emit("scene:switch",{streamId:e,sceneId:s})},[e]),x=(0,n.useCallback)((s,n)=>{t.current&&e&&t.current.emit("avatar:speak",{streamId:e,text:s,avatarId:n})},[e]),h=(0,n.useCallback)(s=>{t.current&&e&&t.current.emit("chat:message",{streamId:e,...s})},[e]),f=(0,n.useCallback)((e,s,n)=>{t.current&&t.current.emit("guest:signal:offer",{streamId:e,offer:s,guestId:n})},[]),v=(0,n.useCallback)((e,s,n)=>{t.current&&t.current.emit("guest:signal:answer",{targetSocketId:e,answer:s,guestId:n})},[]),b=(0,n.useCallback)((e,s,n,a)=>{t.current&&t.current.emit("guest:signal:ice",{streamId:s,targetSocketId:n,candidate:e,guestId:a})},[]);return{socket:t.current,startStream:u,stopStream:m,switchScene:g,speakWithAvatar:x,sendChatMessage:h,sendOffer:f,sendAnswer:v,sendIceCandidate:b}}},2371:function(e,t,s){s.d(t,{D:function(){return n}});let n=(0,s(9625).Ue)((e,t)=>({stream:null,isStreaming:!1,streamDuration:0,scenes:[],activeScene:null,previewScene:null,isTransitioning:!1,avatars:[],activeAvatar:null,avatarSessionId:null,chatMessages:[],chatPaused:!1,guests:[],analytics:null,sidebarOpen:!0,activePanel:"scenes",aiDirectorEnabled:!1,directorLogs:[],aiInsights:null,setAiDirectorEnabled:t=>e({aiDirectorEnabled:t}),addDirectorLog:t=>e(e=>({directorLogs:[{...t,id:Math.random().toString(36).substr(2,9),timestamp:new Date},...e.directorLogs].slice(0,50)})),setDirectorLogs:t=>e({directorLogs:t}),setAiInsights:t=>e({aiInsights:t}),setStream:t=>e({stream:t}),startStream:()=>e({isStreaming:!0,stream:t().stream?{...t().stream,status:"live",startedAt:new Date}:null}),stopStream:()=>e({isStreaming:!1,streamDuration:0,stream:t().stream?{...t().stream,status:"ended",endedAt:new Date}:null}),updateStreamDuration:t=>e({streamDuration:t}),setScenes:t=>e({scenes:t}),addScene:t=>e(e=>({scenes:[...e.scenes,t]})),removeScene:t=>e(e=>{var s;return{scenes:e.scenes.filter(e=>e.id!==t),activeScene:(null===(s=e.activeScene)||void 0===s?void 0:s.id)===t?null:e.activeScene}}),setActiveScene:t=>e({activeScene:t}),setPreviewScene:t=>e({previewScene:t}),setIsTransitioning:t=>e({isTransitioning:t}),setAvatars:t=>e({avatars:t}),setActiveAvatar:t=>e({activeAvatar:t}),setAvatarSessionId:t=>e({avatarSessionId:t}),speakWithAvatar:s=>{let n=t().activeAvatar;n&&(e({activeAvatar:{...n,status:"speaking"}}),setTimeout(()=>{e({activeAvatar:{...n,status:"idle"}})},50*s.length))},addChatMessage:t=>e(e=>({chatMessages:[...e.chatMessages.slice(-99),t]})),clearChat:()=>e({chatMessages:[]}),toggleChatPause:()=>e(e=>({chatPaused:!e.chatPaused})),addGuest:t=>e(e=>({guests:[...e.guests,t]})),removeGuest:t=>e(e=>({guests:e.guests.filter(e=>e.id!==t)})),updateGuestStatus:(t,s)=>e(e=>({guests:e.guests.map(e=>e.id===t?{...e,status:s}:e)})),setAnalytics:t=>e({analytics:t}),toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setActivePanel:t=>e({activePanel:t})}))},3448:function(e,t,s){s.d(t,{BK:function(){return o},LU:function(){return i},cn:function(){return r},uf:function(){return c}});var n=s(1994),a=s(3335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,n.W)(t))}function i(e){let t=Math.floor(e/3600),s=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(s.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")):"".concat(s,":").concat(n.toString().padStart(2,"0"))}function c(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function o(e){let t=new Date,s=new Date(e),n=Math.floor((t.getTime()-s.getTime())/1e3);return n<60?"just now":n<3600?"".concat(Math.floor(n/60),"m ago"):n<86400?"".concat(Math.floor(n/3600),"h ago"):"".concat(Math.floor(n/86400),"d ago")}}}]);