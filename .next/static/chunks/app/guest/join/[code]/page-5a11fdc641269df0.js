(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{2306:function(e,t,n){Promise.resolve().then(n.bind(n,9913))},257:function(e,t,n){"use strict";var r,a;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(a=n.g.process)?void 0:a.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,r,a=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&m())}function m(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function x(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=x,a.addListener=x,a.once=x,a.off=x,a.removeListener=x,a.removeAllListeners=x,a.emit=x,a.prependListener=x,a.prependOnceListener=x,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}},i=!0;try{t[e](o,o.exports,r),i=!1}finally{i&&delete n[e]}return o.exports}r.ab="//";var a=r(229);e.exports=a}()},9913:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(7437),a=n(2265),o=n(8614),i=n(521),s=n(2252),c=n(3581),l=n(730),u=n(8662),d=n(8178),m=n(9374),h=n(8728),x=n(2023),f=n(5863);let p=(0,n(9763).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var b=n(3448),g=n(9376),v=n(257);function y(){let{code:e}=(0,g.useParams)(),t=(0,g.useRouter)(),n=(0,a.useRef)(null),[y,j]=(0,a.useState)("preview"),[w,N]=(0,a.useState)(null),[k,T]=(0,a.useState)(null),[S,C]=(0,a.useState)(!1),[M,E]=(0,a.useState)(!1),[z,Z]=(0,a.useState)(null);(0,a.useEffect)(()=>{let t=async()=>{try{let t=await fetch("".concat(v.env.NEXT_PUBLIC_API_URL,"/api/guests/join/").concat(e),{method:"POST"}),n=await t.json();if(n.error){Z(n.error),j("error");return}N(n.guest)}catch(e){Z("Failed to connect to server"),j("error")}};e&&t()},[e]),(0,a.useEffect)(()=>{"preview"===y&&n.current&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(e=>{n.current&&(n.current.srcObject=e)}).catch(e=>console.error("Could not access camera:",e))},[y]);let _=async()=>{j("joining"),setTimeout(()=>{j("connected")},2e3)};return"error"===y?(0,r.jsx)("div",{className:"min-h-screen bg-surface-500 flex items-center justify-center p-6 text-white",children:(0,r.jsxs)("div",{className:"glass max-w-md w-full p-8 text-center rounded-3xl border border-red-500/20",children:[(0,r.jsx)(s.Z,{size:48,className:"text-red-400 mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Invalid Invite"}),(0,r.jsx)("p",{className:"text-gray-400 mb-6",children:z||"This invite code is invalid or has expired."}),(0,r.jsx)("button",{onClick:()=>t.push("/"),className:"w-full py-3 rounded-xl bg-white/10 hover:bg-white/20 transition-colors",children:"Back to Home"})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-surface-500 flex items-center justify-center p-6 text-white",children:[(0,r.jsxs)(o.M,{mode:"wait",children:["preview"===y&&(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:"glass max-w-xl w-full p-8 rounded-3xl",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-accent-cyan to-accent-purple bg-clip-text text-transparent",children:"Ready to join?"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["You've been invited by ",(null==w?void 0:w.streamId)?"Broadcaster":"..."]})]}),(0,r.jsxs)("div",{className:"relative aspect-video bg-black rounded-2xl overflow-hidden mb-8 shadow-2xl group",children:[(0,r.jsx)("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,className:(0,b.cn)("w-full h-full object-cover",M&&"hidden")}),M&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-surface-400",children:(0,r.jsx)(c.Z,{size:48,className:"text-gray-500 opacity-20"})}),(0,r.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:()=>C(!S),className:(0,b.cn)("p-4 rounded-2xl backdrop-blur-md transition-all",S?"bg-red-500/80 text-white":"bg-black/40 text-white hover:bg-black/60"),title:S?"Unmute Microphone":"Mute Microphone","aria-label":S?"Unmute Microphone":"Mute Microphone",children:S?(0,r.jsx)(l.Z,{size:20}):(0,r.jsx)(u.Z,{size:20})}),(0,r.jsx)("button",{onClick:()=>E(!M),className:(0,b.cn)("p-4 rounded-2xl backdrop-blur-md transition-all",M?"bg-red-500/80 text-white":"bg-black/40 text-white hover:bg-black/60"),title:M?"Start Camera":"Stop Camera","aria-label":M?"Start Camera":"Stop Camera",children:M?(0,r.jsx)(d.Z,{size:20}):(0,r.jsx)(m.Z,{size:20})}),(0,r.jsx)("button",{className:"p-4 rounded-2xl bg-black/40 backdrop-blur-md text-white hover:bg-black/60 transition-all",title:"Camera & Audio Settings","aria-label":"Camera & Audio Settings",children:(0,r.jsx)(h.Z,{size:20})})]})]}),(0,r.jsxs)("button",{onClick:_,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-accent-cyan to-accent-purple text-white font-bold text-lg shadow-neon-cyan hover:shadow-neon-purple transition-all flex items-center justify-center gap-3",children:[(0,r.jsx)(x.Z,{size:20}),"Join Stream"]})]}),"joining"===y&&(0,r.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[(0,r.jsx)(f.Z,{size:64,className:"text-accent-cyan animate-spin mx-auto mb-6"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Connecting to Studio..."}),(0,r.jsx)("p",{className:"text-gray-400",children:"Negotiating WebRTC session"})]}),"connected"===y&&(0,r.jsxs)(i.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass max-w-md w-full p-12 rounded-3xl text-center",children:[(0,r.jsx)(p,{size:64,className:"text-green-400 mx-auto mb-6"}),(0,r.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"You're In!"}),(0,r.jsx)("p",{className:"text-gray-400 mb-8",children:"You are now broadcasting to the studio. Break a leg!"}),(0,r.jsx)("div",{className:"p-4 rounded-2xl bg-green-500/10 border border-green-500/20 text-green-300 text-sm",children:"Always keep this tab open during the stream."})]})]}),(0,r.jsxs)("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute top-1/4 -left-20 w-96 h-96 bg-accent-cyan/10 rounded-full blur-[120px]"}),(0,r.jsx)("div",{className:"absolute bottom-1/4 -right-20 w-96 h-96 bg-accent-purple/10 rounded-full blur-[120px]"})]})]})}},3448:function(e,t,n){"use strict";n.d(t,{BK:function(){return c},LU:function(){return i},cn:function(){return o},uf:function(){return s}});var r=n(1994),a=n(3335);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}function i(e){let t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0")):"".concat(n,":").concat(r.toString().padStart(2,"0"))}function s(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function c(e){let t=new Date,n=new Date(e),r=Math.floor((t.getTime()-n.getTime())/1e3);return r<60?"just now":r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):"".concat(Math.floor(r/86400),"d ago")}}},function(e){e.O(0,[746,834,971,117,744],function(){return e(e.s=2306)}),_N_E=e.O()}]);