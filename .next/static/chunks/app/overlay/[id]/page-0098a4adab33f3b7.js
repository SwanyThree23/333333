(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{2799:function(e,t,a){Promise.resolve().then(a.bind(a,491))},401:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8867:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},8997:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9345:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},4743:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},7806:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5805:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},5395:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2926:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},491:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var i=a(7437),s=a(2265),n=a(9376),l=a(8614),c=a(521),r=a(5749),o=a(2371),d=a(3448);function u(e){let{messages:t,maxMessages:a=10,className:n}=e,[r,o]=(0,s.useState)([]);return(0,s.useEffect)(()=>{o(t.slice(-a))},[t,a]),(0,i.jsx)("div",{className:(0,d.cn)("flex flex-col gap-2 p-6 pointer-events-none",n),children:(0,i.jsx)(l.M,{initial:!1,children:r.map(e=>(0,i.jsxs)(c.E.div,{initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.2}},className:(0,d.cn)("p-3 rounded-xl backdrop-blur-md max-w-[400px]",e.highlighted?"bg-accent-burgundy/40 border border-accent-burgundy/50 shadow-lg shadow-accent-burgundy/20":"bg-black/40 border border-white/5 shadow-sm"),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)("span",{className:"font-bold text-accent-gold text-sm drop-shadow-sm",children:e.username}),e.platform&&(0,i.jsx)("span",{className:"text-[10px] uppercase px-1.5 py-0.5 rounded bg-white/10 text-gray-400",children:e.platform})]}),(0,i.jsx)("p",{className:"text-white text-sm leading-relaxed drop-shadow-sm",children:e.message}),e.donation&&(0,i.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-accent-gold font-bold text-sm",children:[(0,i.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-accent-gold/20 border border-accent-gold/30",children:[e.donation.currency,e.donation.amount]}),(0,i.jsx)("span",{className:"animate-pulse",children:"✨ GENERATED DONATION ✨"})]})]},e.id))})})}var x=a(7806);let p=(0,a(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var h=a(8997);function m(){let[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=e=>{let t={id:Math.random().toString(36).substr(2,9),...e.detail};n(e=>[...e,t])};return window.addEventListener("stream-alert",e),()=>window.removeEventListener("stream-alert",e)},[]),(0,s.useEffect)(()=>{if(!e&&a.length>0){t(a[0]),n(e=>e.slice(1));let e=setTimeout(()=>{t(null)},5e3);return()=>clearTimeout(e)}},[e,a]),(0,i.jsx)("div",{className:"fixed inset-0 pointer-events-none flex items-start justify-center pt-20",children:(0,i.jsx)(l.M,{children:e&&(0,i.jsxs)(c.E.div,{initial:{opacity:0,y:-50,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:1.1,y:-20},className:"relative z-50 px-10 py-6 rounded-3xl bg-surface-500/80 backdrop-blur-2xl border border-white/10 shadow-2xl flex flex-col items-center min-w-[400px]",children:[(0,i.jsxs)("div",{className:"absolute inset-0 overflow-hidden rounded-3xl",children:[(0,i.jsx)(c.E.div,{animate:{rotate:[0,360],scale:[1,1.2,1]},transition:{duration:10,repeat:1/0,ease:"linear"},className:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-to-br from-accent-burgundy/20 to-transparent blur-3xl opacity-30"}),(0,i.jsx)(c.E.div,{animate:{rotate:[360,0],scale:[1,1.3,1]},transition:{duration:12,repeat:1/0,ease:"linear"},className:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tr from-accent-gold/20 to-transparent blur-3xl opacity-30"})]}),(0,i.jsxs)("div",{className:"relative flex flex-col items-center text-center",children:[(0,i.jsxs)("div",{className:(0,d.cn)("w-20 h-20 rounded-2xl flex items-center justify-center mb-4 shadow-xl","follower"===e.type&&"bg-blue-500 text-white shadow-blue-500/20","donation"===e.type&&"bg-accent-gold text-white shadow-accent-gold/20","subscriber"===e.type&&"bg-accent-burgundy text-white shadow-accent-burgundy/20"),children:["follower"===e.type&&(0,i.jsx)(x.Z,{size:40}),"donation"===e.type&&(0,i.jsx)(p,{size:40}),"subscriber"===e.type&&(0,i.jsx)(h.Z,{size:40})]}),(0,i.jsxs)(c.E.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-3xl font-black mb-2 uppercase tracking-tighter italic",children:[(0,i.jsx)("span",{className:"text-white",children:"NEW "}),(0,i.jsx)("span",{className:(0,d.cn)("follower"===e.type&&"text-blue-400","donation"===e.type&&"text-accent-gold","subscriber"===e.type&&"text-accent-burgundy"),children:e.type})]}),(0,i.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"text-white text-4xl font-bold mb-4 drop-shadow-lg",children:[e.user,e.amount&&(0,i.jsxs)("span",{className:"text-accent-gold active:animate-bounce",children:[" - ",e.amount]})]}),e.message&&(0,i.jsxs)(c.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-gray-300 text-lg italic max-w-sm",children:['"',e.message,'"']})]}),(0,i.jsx)("div",{className:"absolute -bottom-2 flex gap-1",children:[1,2,3,4,5].map(e=>(0,i.jsx)(c.E.div,{animate:{y:[-20,-100],opacity:[0,1,0],x:[0,(e-3)*20]},transition:{duration:1.5,repeat:1/0,delay:.2*e},className:"w-1 h-1 rounded-full bg-accent-gold"},e))})]})})})}var y=a(1171),f=a(4989),b=a(257);function g(){let{id:e}=(0,n.useParams)(),{socket:t,sendIceCandidate:a}=(0,r.s)(e),{activeScene:d,activeAvatar:x,setActiveScene:p,scenes:h,setScenes:g,guests:w}=(0,o.D)(),[v,j]=(0,s.useState)([]),[k,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{let t=async()=>{try{let[t,a]=await Promise.all([fetch("".concat(b.env.NEXT_PUBLIC_API_URL||"http://localhost:3001","/api/streams/").concat(e)),fetch("".concat(b.env.NEXT_PUBLIC_API_URL||"http://localhost:3001","/api/scenes/").concat(e))]),i=await t.json(),s=await a.json();N(i),g(s);let n=s.find(e=>e.id===i.activeSceneId)||s[0];n&&p(n)}catch(e){console.error("Failed to fetch overlay data:",e)}};e&&t()},[e,g,p]),(0,s.useEffect)(()=>{if(!t)return;let e=e=>{j(t=>[...t.slice(-19),e]),e.donation&&window.dispatchEvent(new CustomEvent("stream-alert",{detail:{type:"donation",user:e.username,amount:"".concat(e.donation.currency).concat(e.donation.amount),message:e.message}}))};return t.on("chat:message",e),()=>{t.off("chat:message",e)}},[t]);let E=(null==d?void 0:d.transitionType)||"fade";return(0,i.jsxs)("div",{className:"relative w-screen h-screen bg-black overflow-hidden select-none",children:[(0,i.jsx)("div",{className:"absolute inset-0",children:(0,i.jsx)(l.M,{mode:"wait",children:d?(0,i.jsxs)(c.E.div,{...{fade:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}},slide:{initial:{x:"100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25}},zoom:{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},transition:{duration:.6}},cut:{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1},transition:{duration:0}}}[E],className:"w-full h-full relative",children:[x&&(0,i.jsx)(y.F,{avatarId:x.id,streamId:e,className:"w-full h-full object-cover"}),(0,i.jsx)("div",{className:"absolute bottom-10 right-10 w-[400px]",children:(0,i.jsx)(f.iu,{streamId:e,className:"max-w-full"})}),d.sources.filter(e=>e.visible).map(e=>(0,i.jsxs)(c.E.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute overflow-hidden",style:{left:"".concat(e.position.x,"%"),top:"".concat(e.position.y,"%"),width:"".concat(e.size.width,"px"),height:"".concat(e.size.height,"px"),transform:"translate(-50%, -50%)",zIndex:e.zIndex},children:["text"===e.type&&(0,i.jsx)("div",{className:"text-white text-2xl font-bold bg-black/40 px-4 py-2 rounded-lg backdrop-blur-sm",children:e.name}),"image"===e.type&&"string"==typeof e.settings.url&&(0,i.jsx)("img",{src:e.settings.url,alt:"",className:"w-full h-full object-contain"})]},e.id))]},d.id):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white/20",children:(0,i.jsx)("h1",{className:"text-4xl font-black tracking-widest italic opacity-10",children:"WAITING FOR STREAM"})})})}),(0,i.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-50",children:[(0,i.jsx)(u,{messages:v,className:"absolute bottom-10 left-10"}),(0,i.jsx)(m,{}),(0,i.jsx)("div",{className:"absolute top-10 right-10 flex flex-col items-end",children:(0,i.jsxs)("div",{className:"flex items-center gap-3 bg-black/60 backdrop-blur-md px-4 py-2 rounded-2xl border border-white/10",children:[(0,i.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),(0,i.jsx)("span",{className:"text-white font-bold text-sm",children:"LIVE"}),(0,i.jsx)("div",{className:"w-px h-3 bg-white/20"}),(0,i.jsx)("span",{className:"text-gray-300 text-xs uppercase tracking-wider font-medium",children:(null==k?void 0:k.title)||"SwanyThree Pro Stream"})]})})]}),(0,i.jsx)("div",{className:"absolute inset-0 pointer-events-none border-[20px] border-black/10 z-10"})]})}}},function(e){e.O(0,[230,540,534,971,117,744],function(){return e(e.s=2799)}),_N_E=e.O()}]);